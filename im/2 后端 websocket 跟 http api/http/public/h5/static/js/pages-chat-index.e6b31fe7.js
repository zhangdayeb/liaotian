(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-chat-index"],{"16d7":function(t,i,a){"use strict";a.r(i);var e=a("ee4f"),n=a("78eb");for(var o in n)"default"!==o&&function(t){a.d(i,t,(function(){return n[t]}))}(o);a("91a7");var s,c=a("f0c5"),l=Object(c["a"])(n["default"],e["b"],e["c"],!1,null,"627df158",null,!1,e["a"],s);i["default"]=l.exports},6419:function(t,i,a){var e=a("24fb");i=e(!1),i.push([t.i,".uni-list-cell[data-v-627df158]{overflow:hidden}.uni-media-list-logo[data-v-627df158]{height:%?100?%;width:%?100?%}.search .content[data-v-627df158]{padding-left:%?20?%;height:%?60?%}.header[data-v-627df158]{display:flex;flex-direction:row;padding:10px 15px;align-items:center}.input-view[data-v-627df158]{display:flex;align-items:center;flex-direction:row;background-color:#e7e7e7;height:30px;border-radius:5px;padding:0 10px;flex:1}.input[data-v-627df158]{flex:1;padding:0 5px;height:24px;line-height:24px;font-size:16px}.red_num[data-v-627df158]{position:absolute;height:%?34?%;top:%?7?%;left:%?120?%;font-size:%?23?%!important}\r\n/**\r\n\t.uni-media-list-body {\r\n\t\theight: auto;\r\n\t}\r\n\t*/.uni-swipe-action[data-v-627df158],.uni-swipe[data-v-627df158],.uni-view[data-v-627df158],.uni-media-list[data-v-627df158]{width:%?750?%!important}.action_main[data-v-627df158]{position:fixed;top:55px;\r\n\r\nwidth:%?750?%;height:%?1080?%;z-index:10000}.action_base[data-v-627df158]{position:absolute;right:%?15?%;width:%?300?%;top:%?-15?%;background:#36363d;border-radius:%?10?%}.sj[data-v-627df158]{position:fixed;top:%?-28?%;right:%?26?%;\r\n\r\n\r\nwidth:0;height:0;border-left:%?20?% solid transparent;border-right:%?20?% solid transparent;border-bottom:%?20?% solid #36363d}.action_item[data-v-627df158]{color:#e5e5e5;height:%?100?%;line-height:%?100?%;margin-left:%?45?%;border-bottom:1px solid #3e3e3e}.action_icon[data-v-627df158]{width:%?45?%;height:%?45?%;display:inline-block;vertical-align:middle}.action_item[data-v-627df158]:last-child{border:none}.action_item_text[data-v-627df158]{font-size:%?30?%}",""]),t.exports=i},"78c4":function(t,i,a){"use strict";(function(t){var e=a("4ea4");a("ac1f"),a("5319"),a("498a"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;e(a("3aaa"));var n=e(a("611e")),o=e(a("f85f")),s=e(a("2f25")),c=e(a("bc19")),l=e(a("e04a")),u=e(a("eefd")),d=e(a("e4f8")),r=e(a("8de9")),f=e(a("b516")),h=e(a("b2fc")),v={components:{uniIcon:n.default,uniBadge:o.default,uniSwipeAction:s.default,uniSwipeActionItem:c.default,uniSearchBar:h.default},data:function(){return{list:[],search_list:[],list_index:"",action_menu:!1,action_menu_num:0,options:[{text:"取消",style:{backgroundColor:"#007aff"}},{text:"删除",style:{backgroundColor:"#dd524d"}}]}},onShow:function(){u.default.routeTabBarHook(),uni.$off("data_chat_list");var i=this,a=r.default.localData("chat_list");uni.$on("data_chat_list",(function(a){i.list=a,t.log(a[0].last_msg),i.search_list=i.list,t.log("接收到新数据....")})),a?i.list=a:l.default.getChatList(),i.action_menu=!1},onLoad:function(){},onUnload:function(){uni.$off("data_chat_list")},onPullDownRefresh:function(){l.default.getChatList(),setTimeout((function(){uni.stopPullDownRefresh()}),300)},onHide:function(){this.keyword&&(this.$refs.searchBar.clear(),this.list=this.search_list)},computed:{showActionMenu:function(){return this.action_menu},staticPhoto:function(){return r.default.staticPhoto()},imgRan:function(){return Math.random()}},methods:{search:function(i){i=i.trim();var a=this;if(a.keyword=i,t.log(!i),!i)return a.list=a.search_list,!0;l.default.serchChatMsg({chat_msg:i},(function(t){a.list=t}))},goPath:function(t){t&&uni.navigateTo({url:t})},imageError:function(t){var i=t.currentTarget.dataset.index;this.list[i].photo_path="/default_photo_path.png"},msgHandle:function(t,i){return void 0==i&&(i=16),t?(t=t.replace(/&lt;/g,"<"),t.length>i?t.substr(0,i)+"...":t):""},timestampFormat:function(t){return d.default.timestampFormat(t)},goAction:function(t){var i="";switch(t){case 0:i="../friend/index_list?list_id=0";break;case 1:i="../friend/add";break;case 2:i="../my/store";break;default:return}uni.navigateTo({url:i,animationType:"slide-in-bottom"})},actionMain:function(){this.action_menu=!this.action_menu,this.action_menu_num++},openedAction:function(t){this.list_index=t},swipeAction:function(i){var a=i.content.number,e=this,n=e.list[a].list_id;if(n){var o=e.list[a].top;t.log("top",o);var s=1==o?0:1;switch(t.log("value",s),i.index){case 0:e.$httpSend({path:"/im/message/chatTop ",data:{list_id:n,value:s},success:function(){l.default.getChatList()}});break;case 1:e.$httpSend({path:"/im/chat/deleteChat",data:{list_id:n},success:function(t){l.default.getChatList()}});break;default:break}}},swipeData:function(t,i){return[{text:1==t.top?"取消置顶":"置顶",number:i,style:{}},{text:"删除",number:i,style:{backgroundColor:"rgb(255,58,49)"}}]},goMessage:function(i,a,e,n){e>0&&(l.default.getChatData({send_data:{list_id:i,time:0,is_up:1},is_action_data:1}),this.list[a].no_reader_num=0,r.default.localData("chat_list",this.list),d.default.updataNoReader(i),d.default.setStatusTips()),t.log("chat_id",n),r.default.localData("message_list_id",i),uni.navigateTo({url:"./message?list_id="+i})},goScanCode:function(){var t=this;t.action_menu=!1,f.default.scanCode()}},watch:{},onNavigationBarButtonTap:function(t){this.action_menu=!this.action_menu}};i.default=v}).call(this,a("5a52")["default"])},"78eb":function(t,i,a){"use strict";a.r(i);var e=a("78c4"),n=a.n(e);for(var o in e)"default"!==o&&function(t){a.d(i,t,(function(){return e[t]}))}(o);i["default"]=n.a},"91a7":function(t,i,a){"use strict";var e=a("a4cc"),n=a.n(e);n.a},a4cc:function(t,i,a){var e=a("6419");"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var n=a("4f06").default;n("d66041a0",e,!0,{sourceMap:!1,shadowMode:!1})},ee4f:function(t,i,a){"use strict";a.d(i,"b",(function(){return n})),a.d(i,"c",(function(){return o})),a.d(i,"a",(function(){return e}));var e={uniSwipeAction:a("2f25").default,uniSwipeActionItem:a("bc19").default,uniBadge:a("f85f").default},n=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("v-uni-view",{staticClass:"page"},[a("uni-search-bar",{ref:"searchBar",attrs:{placeholder:"搜索聊天记录",show:!1},on:{confirm:function(i){arguments[0]=i=t.$handleEvent(i),t.search.apply(void 0,arguments)},search:function(i){arguments[0]=i=t.$handleEvent(i),t.search.apply(void 0,arguments)}}}),t.list.length?a("v-uni-view",{staticClass:"uni-list"},[a("uni-swipe-action",t._l(t.list,(function(i,e){return a("uni-swipe-action-item",{key:e,staticClass:"uni-list-cell",attrs:{"right-options":t.swipeData(i,e),"auto-close":!1},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.swipeAction.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"uni-media-list",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.goMessage(i.list_id,e,i.no_reader_num,i.chat_id)}}},[a("v-uni-view",{staticClass:"uni-media-list-logo"},[a("v-uni-image",{staticStyle:{"border-radius":"10px"},attrs:{src:t.staticPhoto+i.photo_path+"?_="+t.imgRan,"lazy-load":!0,"data-index":e},on:{error:function(i){arguments[0]=i=t.$handleEvent(i),t.imageError.apply(void 0,arguments)}}})],1),a("v-uni-view",{staticClass:"red_num"},[a("uni-badge",{attrs:{text:i.no_reader_num,type:"error"}})],1),a("v-uni-view",{staticClass:"uni-media-list-body"},[a("v-uni-view",{staticClass:"uni-media-list-text-top"},[a("v-uni-text",[t._v(t._s(t.msgHandle(i.show_name+"",12)))]),a("v-uni-text",{staticStyle:{float:"right",color:"#8f8f94","font-size":"23upx"}},[t._v(t._s(t.timestampFormat(i.time)))])],1),a("v-uni-view",{staticClass:"uni-media-list-text-bottom uni-ellipsis"},[t._v(t._s(i.last_msg+""))])],1)],1)],1)})),1)],1):t._e(),a("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.showActionMenu,expression:"showActionMenu"}],class:["action_main animated faster",t.action_menu?"bounceInDown":"bounceOutUp"],on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.actionMain.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"action_base"},[a("v-uni-view",{staticClass:"sj"}),a("v-uni-view",{staticClass:"action_item",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.goAction(0)}}},[a("v-uni-view",{staticClass:"uni-media-list-logo action_icon"},[a("v-uni-image",{attrs:{src:"../../static/theme/default/chat/chat.png","lazy-load":!0}})],1),a("v-uni-text",{staticClass:"action_item_text"},[t._v("发起群聊")])],1),a("v-uni-view",{staticClass:"action_item",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.goAction(1)}}},[a("v-uni-view",{staticClass:"uni-media-list-logo action_icon"},[a("v-uni-image",{attrs:{src:"../../static/theme/default/chat/add_friend.png","lazy-load":!0}})],1),a("v-uni-text",{staticClass:"action_item_text"},[t._v("添加好友")])],1),a("v-uni-view",{staticClass:"action_item",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.goAction(2)}}},[a("v-uni-view",{staticClass:"uni-media-list-logo action_icon"},[a("v-uni-image",{attrs:{src:"/static/theme/default/store.png","lazy-load":!0}})],1),a("v-uni-text",{staticClass:"action_item_text"},[t._v("我的收藏")])],1),a("v-uni-view",{staticClass:"action_item",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.goPath("../my/pay/pay")}}},[a("v-uni-view",{staticClass:"uni-media-list-logo action_icon"},[a("v-uni-image",{attrs:{src:"../../static/theme/default/chat/in_out.png","lazy-load":!0}})],1),a("v-uni-text",{staticClass:"action_item_text"},[t._v("收付款")])],1)],1)],1)],1)},o=[]}}]);