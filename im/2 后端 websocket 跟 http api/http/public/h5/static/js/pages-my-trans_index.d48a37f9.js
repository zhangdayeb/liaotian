(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-my-trans_index"],{"12db":function(t,i,e){var n=e("ea7e");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=e("4f06").default;a("5d10bc0e",n,!0,{sourceMap:!1,shadowMode:!1})},2138:function(t,i,e){"use strict";e("a9e3"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n={name:"uniPopupDialog",props:{value:{type:[String,Number],default:""},maxlength:{type:Number,default:10},placeholder:{type:[String,Number],default:"请输入内容"},type:{type:String,default:"error"},mode:{type:String,default:"base"},title:{type:String,default:"提示"},content:{type:String,default:""},beforeClose:{type:Boolean,default:!1}},data:function(){return{dialogType:"error",focus:!1,val:""}},inject:["popup"],watch:{type:function(t){this.dialogType=t},mode:function(t){"input"===t&&(this.dialogType="info")},value:function(t){this.val=t}},created:function(){this.popup.mkclick=!1,"input"===this.mode?(this.dialogType="info",this.val=this.value):this.dialogType=this.type},mounted:function(){this.focus=!0},methods:{onOk:function(){var t=this;this.$emit("confirm",(function(){if(t.popup.close(),"input"===t.mode)return t.val=t.value,t.val}),"input"===this.mode?this.val:"")},close:function(){var t=this;this.beforeClose?this.$emit("close",(function(){t.popup.close()})):this.popup.close()}}};i.default=n},2590:function(t,i,e){"use strict";e.r(i);var n=e("2138"),a=e.n(n);for(var o in n)"default"!==o&&function(t){e.d(i,t,(function(){return n[t]}))}(o);i["default"]=a.a},"2ce8":function(t,i,e){"use strict";e.r(i);var n=e("7938"),a=e("f82e");for(var o in a)"default"!==o&&function(t){e.d(i,t,(function(){return a[t]}))}(o);e("ee33");var s,u=e("f0c5"),d=Object(u["a"])(a["default"],n["b"],n["c"],!1,null,"1798ffb6",null,!1,n["a"],s);i["default"]=d.exports},"6a07":function(t,i,e){var n=e("24fb");i=n(!1),i.push([t.i,".uni-list-cell[data-v-1798ffb6]{overflow:hidden}.uni-media-list-logo[data-v-1798ffb6]{height:%?100?%;width:%?100?%}.search .content[data-v-1798ffb6]{padding-left:%?20?%;height:%?60?%}.header[data-v-1798ffb6]{display:flex;flex-direction:row;padding:10px 15px;align-items:center}.input-view[data-v-1798ffb6]{display:flex;align-items:center;flex-direction:row;background-color:#e7e7e7;height:30px;border-radius:5px;padding:0 10px;flex:1}.input[data-v-1798ffb6]{flex:1;padding:0 5px;height:24px;line-height:24px;font-size:16px}.red_num[data-v-1798ffb6]{position:absolute;height:%?34?%;top:%?7?%;left:%?120?%;font-size:%?23?%!important}\r\n/**\r\n\t.uni-media-list-body {\r\n\t\theight: auto;\r\n\t}\r\n\t*/.uni-swipe-action[data-v-1798ffb6],.uni-swipe[data-v-1798ffb6],.uni-view[data-v-1798ffb6],.uni-media-list[data-v-1798ffb6]{width:%?750?%!important}.action_main[data-v-1798ffb6]{position:fixed;top:55px;\r\n\r\nwidth:%?750?%;height:%?1080?%;z-index:10000}.action_base[data-v-1798ffb6]{position:absolute;right:%?15?%;width:%?300?%;top:%?-15?%;background:#36363d;border-radius:%?10?%}.sj[data-v-1798ffb6]{position:fixed;top:%?-28?%;right:%?26?%;\r\n\r\n\r\nwidth:0;height:0;border-left:%?20?% solid transparent;border-right:%?20?% solid transparent;border-bottom:%?20?% solid #36363d}.action_item[data-v-1798ffb6]{color:#e5e5e5;height:%?100?%;line-height:%?100?%;margin-left:%?45?%;border-bottom:1px solid #3e3e3e}.action_icon[data-v-1798ffb6]{width:%?45?%;height:%?45?%;display:inline-block;vertical-align:middle}.action_item[data-v-1798ffb6]:last-child{border:none}.action_item_text[data-v-1798ffb6]{font-size:%?30?%}",""]),t.exports=i},7938:function(t,i,e){"use strict";e.d(i,"b",(function(){return a})),e.d(i,"c",(function(){return o})),e.d(i,"a",(function(){return n}));var n={uniSwipeAction:e("2f25").default,uniSwipeActionItem:e("bc19").default,uniBadge:e("f85f").default,uniPopup:e("3b4f").default},a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"page"},[e("uni-search-bar",{ref:"searchBar",attrs:{placeholder:"搜索聊天记录",show:!1},on:{confirm:function(i){arguments[0]=i=t.$handleEvent(i),t.search.apply(void 0,arguments)},search:function(i){arguments[0]=i=t.$handleEvent(i),t.search.apply(void 0,arguments)}}}),t.list.length?e("v-uni-view",{staticClass:"uni-list"},[e("uni-swipe-action",t._l(t.list,(function(i,n){return e("uni-swipe-action-item",{key:n,staticClass:"uni-list-cell",attrs:{"right-options":t.swipeData(i,n),"auto-close":!1},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.swipeAction.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"uni-media-list",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goMessage(i.list_id,n,i.no_reader_num,i.chat_id,i.show_name)}}},[e("v-uni-view",{staticClass:"uni-media-list-logo"},[e("v-uni-image",{staticStyle:{"border-radius":"10px"},attrs:{src:t.staticPhoto+i.photo_path+"?_="+t.imgRan,"lazy-load":!0,"data-index":n},on:{error:function(i){arguments[0]=i=t.$handleEvent(i),t.imageError.apply(void 0,arguments)}}})],1),e("v-uni-view",{staticClass:"red_num"},[e("uni-badge",{attrs:{text:i.no_reader_num,type:"error"}})],1),e("v-uni-view",{staticClass:"uni-media-list-body"},[e("v-uni-view",{staticClass:"uni-media-list-text-top"},[e("v-uni-text",[t._v(t._s(t.msgHandle(i.show_name+"",12)))]),e("v-uni-view",{staticStyle:{float:"right",color:"#8f8f94","font-size":"23upx"}},[t._v(t._s(t.timestampFormat(i.time)))])],1),e("v-uni-view",{staticClass:"uni-media-list-text-bottom uni-ellipsis"},[t._v(t._s(i.last_msg))])],1)],1)],1)})),1)],1):t._e(),e("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.showActionMenu,expression:"showActionMenu"}],class:["action_main animated faster",t.action_menu?"bounceInDown":"bounceOutUp"],on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.actionMain.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"action_base"},[e("v-uni-view",{staticClass:"sj"}),e("v-uni-view",{staticClass:"action_item",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.goAction(0)}}},[e("v-uni-view",{staticClass:"uni-media-list-logo action_icon"},[e("v-uni-image",{attrs:{src:"../../static/theme/default/chat/chat.png","lazy-load":!0}})],1),e("v-uni-text",{staticClass:"action_item_text"},[t._v("发起群聊")])],1),e("v-uni-view",{staticClass:"action_item",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.goAction(1)}}},[e("v-uni-view",{staticClass:"uni-media-list-logo action_icon"},[e("v-uni-image",{attrs:{src:"../../static/theme/default/chat/add_friend.png","lazy-load":!0}})],1),e("v-uni-text",{staticClass:"action_item_text"},[t._v("添加好友")])],1),e("v-uni-view",{staticClass:"action_item",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.goPath("../my/pay/pay")}}},[e("v-uni-view",{staticClass:"uni-media-list-logo action_icon"},[e("v-uni-image",{attrs:{src:"../../static/theme/default/chat/in_out.png","lazy-load":!0}})],1),e("v-uni-text",{staticClass:"action_item_text"},[t._v("收付款")])],1)],1)],1),e("uni-popup",{ref:"popup",attrs:{type:"confirm"}},[e("uni-popup-confirm",{attrs:{title:"转发消息",content:t.popuMsg},on:{confirm:function(i){arguments[0]=i=t.$handleEvent(i),t.confirm.apply(void 0,arguments)}}})],1)],1)},o=[]},b45c3:function(t,i,e){"use strict";var n=e("12db"),a=e.n(n);a.a},bed1:function(t,i,e){"use strict";e.r(i);var n=e("f22c1"),a=e("2590");for(var o in a)"default"!==o&&function(t){e.d(i,t,(function(){return a[t]}))}(o);e("b45c3");var s,u=e("f0c5"),d=Object(u["a"])(a["default"],n["b"],n["c"],!1,null,"7cddedf5",null,!1,n["a"],s);i["default"]=d.exports},cc31:function(t,i,e){var n=e("6a07");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=e("4f06").default;a("15b5a346",n,!0,{sourceMap:!1,shadowMode:!1})},ea7e:function(t,i,e){var n=e("24fb");i=n(!1),i.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.uni-popup-dialog[data-v-7cddedf5]{width:300px;border-radius:5px;background-color:#fff}.uni-dialog-title[data-v-7cddedf5]{display:flex;flex-direction:row;justify-content:flex-start;padding:20px 0 10px 15px}.uni-dialog-title-text[data-v-7cddedf5]{font-size:16px;font-weight:500}.uni-dialog-content[data-v-7cddedf5]{display:flex;flex-direction:row;justify-content:center;align-items:center;padding:5px 15px 15px 15px}.uni-dialog-content-text[data-v-7cddedf5]{font-size:14px;color:#6e6e6e}.uni-dialog-button-group[data-v-7cddedf5]{display:flex;flex-direction:row;border-top-color:#bdbdbd;border-top-style:solid;border-top-width:1px;margin-top:5px}.uni-dialog-button[data-v-7cddedf5]{display:flex;flex:1;flex-direction:row;justify-content:center;align-items:center;height:55px}.uni-border-left[data-v-7cddedf5]{border-left-color:#bdbdbd;border-left-style:solid;border-left-width:1px}.uni-dialog-button-text[data-v-7cddedf5]{font-size:14px}.uni-dialog-input[data-v-7cddedf5]{flex:1;font-size:14px;overflow:visible!important;line-height:1.9rem!important;height:1.9rem!important;border-radius:10px;padding-left:2px;background-color:#eee}.uni-popup__success[data-v-7cddedf5]{color:#4cd964}.uni-popup__warn[data-v-7cddedf5]{color:#f0ad4e}.uni-popup__error[data-v-7cddedf5]{color:#dd524d}.uni-popup__info[data-v-7cddedf5]{color:#909399}',""]),t.exports=i},ee33:function(t,i,e){"use strict";var n=e("cc31"),a=e.n(n);a.a},f22c1:function(t,i,e){"use strict";var n;e.d(i,"b",(function(){return a})),e.d(i,"c",(function(){return o})),e.d(i,"a",(function(){return n}));var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"uni-popup-dialog"},[e("v-uni-view",{staticClass:"uni-dialog-title"},[e("v-uni-text",{staticClass:"uni-dialog-title-text",class:["uni-popup__"+t.dialogType]},[t._v(t._s(t.title))])],1),e("v-uni-view",{staticClass:"uni-dialog-content"},["base"===t.mode?e("v-uni-text",{staticClass:"uni-dialog-content-text"},[t._v(t._s(t.content))]):e("v-uni-input",{staticClass:"uni-dialog-input",attrs:{maxlength:t.maxlength,type:"text",placeholder:t.placeholder,focus:t.focus},model:{value:t.val,callback:function(i){t.val=i},expression:"val"}})],1),e("v-uni-view",{staticClass:"uni-dialog-button-group"},[e("v-uni-view",{staticClass:"uni-dialog-button",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.close.apply(void 0,arguments)}}},[e("v-uni-text",{staticClass:"uni-dialog-button-text"},[t._v("取消")])],1),e("v-uni-view",{staticClass:"uni-dialog-button uni-border-left",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onOk.apply(void 0,arguments)}}},[e("v-uni-text",{staticClass:"uni-dialog-button-text uni-button-color"},[t._v("确定")])],1)],1)],1)},o=[]},f82e:function(t,i,e){"use strict";e.r(i);var n=e("fe5c"),a=e.n(n);for(var o in n)"default"!==o&&function(t){e.d(i,t,(function(){return n[t]}))}(o);i["default"]=a.a},fe5c:function(t,i,e){"use strict";(function(t){var n=e("4ea4");e("ac1f"),e("5319"),e("498a"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;n(e("3aaa"));var a=n(e("611e")),o=n(e("f85f")),s=n(e("2f25")),u=n(e("bc19")),d=n(e("e04a")),l=n(e("eefd")),c=n(e("e4f8")),r=n(e("8de9")),f=n(e("b516")),p=n(e("b2fc")),v=n(e("3b4f")),h=n(e("bed1")),g={components:{uniIcon:a.default,uniBadge:o.default,uniSwipeAction:s.default,uniSwipeActionItem:u.default,uniSearchBar:p.default,uniPopup:v.default,uniPopupConfirm:h.default},data:function(){return{trans_id:"",popuMsg:"",list:[],search_list:[],list_index:"",action_menu:!1,action_menu_num:0,options:[{text:"取消",style:{backgroundColor:"#007aff"}},{text:"删除",style:{backgroundColor:"#dd524d"}}]}},onShow:function(){l.default.routeTabBarHook(),uni.$off("data_chat_list");var i=this,e=r.default.localData("chat_list");t.log(e),uni.$on("data_chat_list",(function(e){t.log("success"),t.log(e),i.list=e,i.search_list=i.list,t.log("接收到新数据....")})),e?i.list=e:d.default.getChatList(),i.action_menu=!1},onLoad:function(t){"id"in t&&(this.trans_id=t.id)},onUnload:function(){uni.$off("data_chat_list")},onPullDownRefresh:function(){d.default.getChatList(),setTimeout((function(){uni.stopPullDownRefresh()}),300)},onHide:function(){this.keyword&&(this.$refs.searchBar.clear(),this.list=this.search_list)},computed:{showActionMenu:function(){return this.action_menu},staticPhoto:function(){return r.default.staticPhoto()},imgRan:function(){return Math.random()}},methods:{search:function(i){i=i.trim();var e=this;if(e.keyword=i,t.log(!i),!i)return e.list=e.search_list,!0;d.default.serchChatMsg({chat_msg:i},(function(t){e.list=t}))},goPath:function(t){t&&uni.navigateTo({url:t})},imageError:function(t){var i=t.currentTarget.dataset.index;this.list[i].photo_path="/default_photo_path.png"},msgHandle:function(t,i){return void 0==i&&(i=16),t?(t=t.replace(/&lt;/g,"<"),t.length>i?t.substr(0,i)+"...":t):""},timestampFormat:function(t){return c.default.timestampFormat(t)},goAction:function(t){var i="";switch(t){case 0:i="../friend/index_list?list_id=0";break;case 1:i="../friend/add";break;default:return}uni.navigateTo({url:i,animationType:"slide-in-bottom"})},actionMain:function(){this.action_menu=!this.action_menu,this.action_menu_num++},openedAction:function(t){this.list_index=t},swipeAction:function(i){var e=i.content.number,n=this,a=n.list[e].list_id;if(a){var o=n.list[e].top;t.log("top",o);var s=1==o?0:1;switch(t.log("value",s),i.index){case 0:n.$httpSend({path:"/im/message/chatTop ",data:{list_id:a,value:s},success:function(){d.default.getChatList()}});break;case 1:n.$httpSend({path:"/im/chat/deleteChat",data:{list_id:a},success:function(t){d.default.getChatList()}});break;default:break}}},swipeData:function(i,e){return t.log(i),[{text:1==i.top?"取消置顶":"置顶",number:e,style:{}},{text:"删除",number:e,style:{backgroundColor:"rgb(255,58,49)"}}]},goMessage:function(i,e,n,a,o){n>0&&(d.default.getChatData({send_data:{list_id:i,time:0,is_up:1},is_action_data:1}),this.list[e].no_reader_num=0,r.default.localData("chat_list",this.list),c.default.updataNoReader(i),c.default.setStatusTips()),t.log("chat_id",a),r.default.localData("message_list_id",i),this.popuMsg="确认转发给："+o,this.$refs.popup.open()},goScanCode:function(){var t=this;t.action_menu=!1,f.default.scanCode()},confirm:function(t){if("function"===typeof t){var i=r.default.localData("message_list_id");d.default.transMsg({list_id:i,trans_id:this.trans_id},(function(t){uni.redirectTo({url:"/pages/chat/message?trans=1&list_id="+i,success:function(t){}})}))}}},watch:{},onNavigationBarButtonTap:function(t){this.action_menu=!this.action_menu}};i.default=g}).call(this,e("5a52")["default"])}}]);